@use 'tokens' as *;
@use 'sass:math';

// AI Project Card refinements
.ai-project-card { position: relative; padding: 32px 32px 0; border-radius: $radius-card; background: $color-background; transition: transform .5s cubic-bezier(.4,.2,.2,1), box-shadow .5s ease, background .5s ease; }
.ai-project-card__head { display: flex; align-items: flex-start; justify-content: space-between; gap: $space-sm; }
.ai-project-card__title { margin: 0; }
.ai-project-card__icon { width: 32px; height: 32px; border-radius: 9999px; background: $color-text-primary; display: flex; align-items: center; justify-content: center; flex-shrink: 0; img { width: 24px; height: 24px; } }
.ai-project-card__desc { margin: 8px 0 0; }
.ai-project-card__images { position: relative; height: 313px; width: 100%; margin-top: 0; }
// Image wrapper uses CSS variables set inline for rotation/scale/translation
.ai-project-card__img { position: absolute; width: 300px; height: 195px; border-radius: 8px; top: 50%; left: 50%;
	--img-rotation: 0deg; --img-scale: 1; --img-translate-x: 0; --img-translate-y: 0;
	--img-hover-scale: 1; --img-hover-translate-x: 0; --img-hover-translate-y: 0; --img-hover-rotate: 0deg;
	transform: translate(calc(-50% + var(--img-translate-x)), calc(-50% + var(--img-translate-y))) rotate(var(--img-rotation)) scale(var(--img-scale));
	transition: transform .8s cubic-bezier(.25,.6,.3,1), filter .6s ease, box-shadow .6s ease;
	will-change: transform;
}
.ai-project-card__img-inner { position: relative; width: 100%; height: 100%; background-size: cover; background-position: center; border-radius: 8px; overflow: hidden;
	&::after { content: ''; position: absolute; inset: -8px; border: 8px solid rgba($color-primary,0.12); border-radius: 16px; pointer-events: none; transition: border-color .5s ease, box-shadow .6s ease; }
}
.ai-project-card__border { position: absolute; inset: 0; border: 2px solid rgba($color-primary,0.12); border-radius: $radius-card; pointer-events: none; }

// Accent modifiers
.ai-project-card--accent-primary { .ai-project-card__img-inner::after { border-color: rgba($color-primary,0.12); } .ai-project-card__border { border-color: rgba($color-primary,0.12); } }
.ai-project-card--accent-1 { .ai-project-card__img-inner::after { border-color: rgba($color-accent-1,0.12); } .ai-project-card__border { border-color: rgba($color-accent-1,0.12); } }
.ai-project-card--accent-3 { .ai-project-card__img-inner::after { border-color: rgba($color-accent-3,0.12); } .ai-project-card__border { border-color: rgba($color-accent-3,0.12); } }

// Hover & focus states (keyboard accessible using :focus-within for now if interactive children added later)
.ai-project-card {
	&:hover, &:focus-within { transform: translateY(-8px); }
	// Per-image hover using its custom hover variables
	&:hover .ai-project-card__img, &:focus-within .ai-project-card__img {
		transform: translate(calc(-50% + var(--img-translate-x) + var(--img-hover-translate-x)), calc(-50% + var(--img-translate-y) + var(--img-hover-translate-y))) rotate(calc(var(--img-rotation) + var(--img-hover-rotate))) scale(calc(var(--img-scale) * var(--img-hover-scale)));
	}
	&.ai-project-card--accent-1:hover .ai-project-card__border, &.ai-project-card--accent-1:focus-within .ai-project-card__border { border-color: $color-accent-1; box-shadow: 0 0 40px rgba($color-accent-1,0.6); }
	&.ai-project-card--accent-primary:hover .ai-project-card__border, &.ai-project-card--accent-primary:focus-within .ai-project-card__border { border-color: $color-primary; box-shadow: 0 0 40px rgba($color-primary,0.5); }
	&.ai-project-card--accent-3:hover .ai-project-card__border, &.ai-project-card--accent-3:focus-within .ai-project-card__border { border-color: $color-accent-3; box-shadow: 0 0 40px rgba($color-accent-3,0.55); }
	&:hover .ai-project-card__img-inner::after, &:focus-within .ai-project-card__img-inner::after { border-color: transparent; }
}

// Reduced motion preference: remove translateY elevation & heavy scaling
@media (prefers-reduced-motion: reduce) {
	.ai-project-card { transition: background .4s ease, box-shadow .4s ease; }
	.ai-project-card__img { transition: none; }
	.ai-project-card:hover, .ai-project-card:focus-within { transform: none; }
	.ai-project-card:hover .ai-project-card__img, .ai-project-card:focus-within .ai-project-card__img { transform: translate(calc(-50% + var(--img-translate-x)), calc(-50% + var(--img-translate-y))) rotate(var(--img-rotation)) scale(var(--img-scale)); }
}
