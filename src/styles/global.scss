@use 'tokens' as *;
@use 'ai-projects';
@use 'bento';
@use 'theme';
@use 'play';
@use 'reads';
@use 'footer';
@use './hero.scss';
@use 'nudge';
@use 'sass:math';

html, body, #root {
  height: 100%;
}
body {
  margin: 0;
  font-family: $font-sans-geom;
  background: $color-background;
  color: $color-text-primary;
  -webkit-font-smoothing: antialiased;
}

// Typography utility classes
.h-hero-sans { font: 400 math.div($font-size-hero-sans, $lh-hero) $font-sans-geom; letter-spacing: -3px; }
.h-hero-serif { font: 300 math.div($font-size-hero-serif, $lh-hero) $font-serif-news; }
.h-title-sans { font: 400 math.div($font-size-title-sans, $lh-hero) $font-sans-geom; letter-spacing: -2px; }
.h-title-serif { font: 300 math.div($font-size-title-serif, $lh-hero) $font-serif-news; }
.h-card-title { font: 400 math.div($font-size-card-title, $lh-hero) $font-sans-geom; letter-spacing: -1.6px; }
.text-subtext { font: 400 math.div($font-size-subtext-sans, $lh-body) $font-sans-geom; letter-spacing: -1.2px; }
.text-subtext-serif { font: 400 math.div($font-size-subtext-serif, $lh-serif-tight) $font-serif-news; }
.text-label { font: 400 math.div($font-size-label, $lh-body) $font-sans-geom; }
.text-button { font: 500 math.div($font-size-button, $lh-hero) $font-sans-geom; letter-spacing: -0.8px; }
.text-secondary { color: $color-text-secondary; }

// Surface styles
.surface-glass {
  background: $color-surface-glass;
  border: 2px solid rgba($color-primary, 0.12);
  border-radius: $radius-card;
  position: relative;
  &::after { content: ''; position: absolute; inset: 0; border: 3px solid rgba($color-primary,0.12); border-radius: inherit; pointer-events: none; }
}
.surface-accent-1 { background: $color-accent-1-surface-bg; border: 2px solid $color-accent-1-surface-border; }
.surface-accent-3 { background: $color-accent-3-surface-bg; border: 2px solid $color-accent-3-surface-border; }

// Tag chip
.tag {
  display: inline-flex;
  align-items: center;
  gap: $space-xs;
  padding: 4px 16px;
  font: 400 math.div($font-size-label, $lh-body) $font-sans-geom;
  background: $color-tag-bg;
  border: 1px solid $color-tag-border;
  border-radius: 28px;
  color: $color-text-secondary;
  white-space: nowrap;
}

// Buttons
.button {
  display: inline-flex;
  align-items: center;
  gap: $space-sm;
  padding: 8px 8px 8px 24px;
  border-radius: 50px;
  font: 500 math.div($font-size-button, $lh-hero) $font-sans-geom;
  letter-spacing: -0.8px;
  cursor: pointer;
  text-decoration: none;
  &--primary { background: $color-primary; color: $color-white; }
  &--secondary { background: rgba($color-primary,0.04); color: $color-text-primary; position: relative; border: 1px solid rgba($color-primary,0.12); }
  .icon-circle { width: 24px; height: 24px; border-radius: 9999px; background: $color-text-primary; display: flex; align-items: center; justify-content: center; }
}

// Layout helpers
.stack { display: flex; flex-direction: column; }
.row { display: flex; flex-direction: row; }
.gap-sm { gap: $space-sm; }
.gap-md { gap: $space-md; }
.gap-lg { gap: $space-lg; }
.gap-xl { gap: $space-xl; }

// Grid utilities
.layout-grid { display: grid; gap: $space-2xl; grid-template-columns: repeat(auto-fit, minmax(320px, 1fr)); }
.layout-grid-tight { display: grid; gap: $space-lg; grid-template-columns: repeat(auto-fit, minmax(240px, 1fr)); }

// Responsive mixin
@mixin respond($bp) {
  @if $bp == sm { @media (max-width: $bp-sm) { @content; } }
  @else if $bp == md { @media (max-width: $bp-md) { @content; } }
  @else if $bp == lg { @media (max-width: $bp-lg) { @content; } }
  @else if $bp == xl { @media (max-width: $bp-xl) { @content; } }
}

// Hero section responsive adjustments
.surface-glass {
  @include respond(md) {
    padding: 160px 24px 32px !important; // reduce large top spacing on smaller screens
  }
  @include respond(sm) {
    padding: 120px 16px 24px !important;
  }
}

.button {
  @include respond(sm) {
    width: 100%;
    justify-content: center;
  }
}

// Fluid typography refinements (already had clamp in media query; add fallback fluid scaling)
@media (max-width: $bp-lg) {
  .h-hero-sans, .h-hero-serif { font-size: clamp(32px, 8vw, 48px); }
  .h-title-sans, .h-title-serif { font-size: clamp(28px, 6vw, 40px); }
  .h-card-title { font-size: clamp(24px, 5.5vw, 32px); }
  .text-subtext { font-size: clamp(18px, 4.5vw, 24px); }
}

// Narrow viewport stacking helpers
.stack-responsive {
  display: flex;
  gap: $space-lg;
  @include respond(md) { flex-direction: column; }
}

// Responsive utilities (progressive enhancement)
@media (max-width: $bp-lg) {
  .h-hero-sans, .h-hero-serif { font-size: clamp(32px, 8vw, 48px); }
  .h-title-sans, .h-title-serif { font-size: clamp(28px, 6vw, 40px); }
  .h-card-title { font-size: clamp(24px, 5.5vw, 32px); }
  .text-subtext { font-size: clamp(18px, 4.5vw, 24px); }
}

// ================= AI Projects Section =================
.ai-projects-section { margin-top: 160px; position: relative; }
.ai-projects-layout { display: flex; gap: $space-2xl; align-items: flex-start; }
.ai-projects-left { flex: 1 1 40%; position: sticky; top: 80px; display: flex; flex-direction: column; gap: $space-lg; }
.ai-projects-left .lines { display: flex; flex-direction: column; gap: $space-sm; }
.ai-projects-left .line { display: flex; flex-wrap: wrap; gap: $space-sm; align-items: baseline; }
.ai-projects-left .description { max-width: 560px; }

.ai-projects-right { flex: 1 1 60%; position: relative; display: flex; flex-direction: column; gap: $space-xl; }
.ai-projects-right .card-wrap { width: 556px; max-width: 100%; background: $color-background; border-radius: $radius-card; position: sticky; }
.ai-projects-right .card-wrap.offset-1 { top: 80px; }
.ai-projects-right .card-wrap.offset-2 { top: 120px; }
.ai-projects-right .card-wrap.offset-3 { top: 160px; }

// Card base moved to _ai-projects.scss

// Tag ticker
.ai-tags-mask { mask-image: url('../assets/a1e4bdcc41dfec88f69cab9665eb9d2726044a65.svg'); -webkit-mask-image: url('../assets/a1e4bdcc41dfec88f69cab9665eb9d2726044a65.svg'); mask-repeat: no-repeat; -webkit-mask-repeat: no-repeat; mask-size: 556px 64px; -webkit-mask-size: 556px 64px; width: 100%; height: 64px; overflow: hidden; position: relative; }
.ai-tags-track { display: flex; gap: $space-sm; padding: 16px 0; width: max-content; }

@keyframes ticker-left { 0% { transform: translateX(0); } 100% { transform: translateX(-50%); } }
@keyframes ticker-right { 0% { transform: translateX(-50%); } 100% { transform: translateX(0); } }

.ticker-group { display: flex; flex-direction: column; gap: $space-sm; }

// Responsive adjustments
@include respond(md) {
  .ai-projects-layout { flex-direction: column; }
  .ai-projects-left { position: relative; top: 0; }
  .ai-projects-right .card-wrap { position: relative; top: 0 !important; }
  .ai-tags-mask { mask: none; -webkit-mask: none; }
  .ai-tags-track { animation-duration: 40s !important; }
}

// ================= Reveal Animation Utility =================
.reveal { opacity: 0; transform: translateY(24px); transition: opacity 600ms cubic-bezier(.16,.84,.44,1), transform 700ms cubic-bezier(.16,.84,.44,1); will-change: opacity, transform; }
.reveal.is-visible { opacity: 1; transform: translateY(0); }
@media (prefers-reduced-motion: reduce) { .reveal { opacity: 1 !important; transform: none !important; transition: none !important; } }

